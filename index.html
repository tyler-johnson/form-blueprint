<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>form-blueprint</title><meta name="description" content="Documentation for form-blueprint"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">form-blueprint</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>form-blueprint</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#form-blueprint" id="form-blueprint" style="color: inherit; text-decoration: none;">
  <h1>Form Blueprint</h1>
</a>
<p><a href="https://www.npmjs.com/package/form-blueprint"><img src="https://img.shields.io/npm/v/form-blueprint.svg" alt="npm"></a> <a href="https://travis-ci.org/tyler-johnson/form-blueprint"><img src="https://travis-ci.org/tyler-johnson/form-blueprint.svg?branch=master" alt="Build Status"></a></p>
<p>Helpers for validating and handling form blueprint objects.</p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h2>Install</h2>
</a>
<p>Install via NPM:</p>
<pre><code class="language-sh"><span class="hl-0">npm i form-blueprint</span>
</code></pre>

<a href="#basic-usage" id="basic-usage" style="color: inherit; text-decoration: none;">
  <h2>Basic Usage</h2>
</a>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">createBlueprint</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;form-blueprint&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">blueprint</span><span class="hl-0"> = </span><span class="hl-6">createBlueprint</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">foo:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">type:</span><span class="hl-0"> </span><span class="hl-3">&quot;text&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">label:</span><span class="hl-0"> </span><span class="hl-3">&quot;Foo&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">default:</span><span class="hl-0"> </span><span class="hl-3">&quot;bar&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-2">numberino:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">type:</span><span class="hl-0"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">label:</span><span class="hl-0"> </span><span class="hl-3">&quot;A Number!&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">default:</span><span class="hl-0"> </span><span class="hl-7">123</span><span class="hl-0">,</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">data</span><span class="hl-0"> = </span><span class="hl-2">blueprint</span><span class="hl-0">.</span><span class="hl-6">transform</span><span class="hl-0">();</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">data</span><span class="hl-0">); </span><span class="hl-8">// { foo: &quot;bar&quot;, numberino: 123 }</span>
</code></pre>

<a href="#blueprint-specification" id="blueprint-specification" style="color: inherit; text-decoration: none;">
  <h2>Blueprint Specification</h2>
</a>
<p>A form blueprint is defined by a schema, which is just a simple JavaScript object. The schema can be very deep, describing both the resulting data structure as well as the elements that make up the HTML form.</p>
<p>In general, we use the YAML format to describe form blueprints. Here is a very simple form blueprint, describing a single input field:</p>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">text</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">A Text Field</span>
</code></pre>

<a href="#general-properties" id="general-properties" style="color: inherit; text-decoration: none;">
  <h3>General Properties</h3>
</a>
<p>All field schemas can have these properties.</p>
<ul>
<li><code>key</code> - The unique string within the parent. The value is derived from the object the field is set on.</li>
<li><code>type</code> - The type of the field. Types are listed below in detail. This is the only required property.</li>
<li><code>label</code> - The human readable identifier for this field.</li>
<li><code>description</code> - A description of the field.</li>
<li><code>default</code> - A default value to use when the form field is left blank.</li>
<li><code>visible</code> - A selector to conditionally show/hide this field depending on other form values (see below).</li>
</ul>

<a href="#field-types" id="field-types" style="color: inherit; text-decoration: none;">
  <h3>Field Types</h3>
</a>
<p>These are the field types supported by Pagedip.</p>

<a href="#text" id="text" style="color: inherit; text-decoration: none;">
  <h4>Text</h4>
</a>
<p>The most basic field is the text field. Use the type <code>&quot;text&quot;</code> for a basic input field, or use <code>&quot;textarea&quot;</code> for a multi-line input. This does not take any special properties.</p>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">text</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">A Text Field</span>
</code></pre>

<a href="#number" id="number" style="color: inherit; text-decoration: none;">
  <h4>Number</h4>
</a>
<p>Very similar to the text field, this is a field for numbers. Use the type <code>&quot;number&quot;</code>. This does not take any special properties.</p>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">number</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">A number field</span><br/><span class="hl-9">default</span><span class="hl-0">: </span><span class="hl-7">10</span>
</code></pre>

<a href="#color" id="color" style="color: inherit; text-decoration: none;">
  <h4>Color</h4>
</a>
<p>Similar to text field and number, presents a color wheel for choosing a color. Use the type <code>&quot;color&quot;</code>. This does not take any special properties.</p>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">color</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-9">Choose a color</span><span class="hl-0">:</span><br/><span class="hl-9">default</span><span class="hl-0">: </span><span class="hl-10">magenta</span>
</code></pre>

<a href="#checkbox" id="checkbox" style="color: inherit; text-decoration: none;">
  <h4>Checkbox</h4>
</a>
<p>Displays a checkbox with a label to the right. Use the type <code>&quot;checkbox&quot;</code>. This does not take any special properties.</p>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">checkbox</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Enable something?</span><br/><span class="hl-9">default</span><span class="hl-0">: </span><span class="hl-4">true</span>
</code></pre>

<a href="#dropdown" id="dropdown" style="color: inherit; text-decoration: none;">
  <h4>Dropdown</h4>
</a>
<p>A dropdown with selectable options. Use the type <code>&quot;select&quot;</code> or <code>&quot;dropdown&quot;</code>. This takes one special property:</p>
<ul>
<li><code>values</code> - An object or array with items for the dropdown. See below for a description of this object.</li>
</ul>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">dropdown</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Select one</span><br/><span class="hl-9">values</span><span class="hl-0">:</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 1</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 2</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 3</span>
</code></pre>

<a href="#radio" id="radio" style="color: inherit; text-decoration: none;">
  <h4>Radio</h4>
</a>
<p>Similar to dropdown, but displays the values as a list radio options. Use the type <code>&quot;radio&quot;</code>. This takes one special property:</p>
<ul>
<li><code>values</code> - An object or array with items for the radio. See below for a description of this object.</li>
</ul>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">radio</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Select one</span><br/><span class="hl-9">values</span><span class="hl-0">:</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 1</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 2</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 3</span>
</code></pre>

<a href="#section" id="section" style="color: inherit; text-decoration: none;">
  <h4>Section</h4>
</a>
<p>A higher-order type that composes several fields together and organizes their values into an object.</p>
<p>A section accepts one of two different structures. The first being the most regular, using an object with type <code>&quot;section&quot;</code>. This will take one special field:</p>
<ul>
<li><code>children</code> - An object of keys mapped to more field schemas. This is also aliased as <code>options</code> which was the property used in the past.</li>
</ul>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">section</span><br/><span class="hl-9">children</span><span class="hl-0">:</span><br/><span class="hl-0">  </span><span class="hl-9">foo</span><span class="hl-0">:</span><br/><span class="hl-0">    </span><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">text</span><br/><span class="hl-0">    </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Foobar</span><br/><span class="hl-0">  </span><span class="hl-9">hello</span><span class="hl-0">:</span><br/><span class="hl-0">    </span><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">checkbox</span><br/><span class="hl-0">    </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">say hello?</span>
</code></pre>

<a href="#list" id="list" style="color: inherit; text-decoration: none;">
  <h4>List</h4>
</a>
<p>Another higher-order type that allows the end user to create as many values as needed. This will more or less just repeat a form-blueprint for every time the user clicks the add button and produces and array of values for the result.</p>
<p>This uses the type <code>&quot;list&quot;</code> and has one special property:</p>
<ul>
<li><code>field</code> - A child form-blueprint schema to repeat N times. This can be literally any valid type, including sections and even more lists.</li>
</ul>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">list</span><br/><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">list</span><br/><span class="hl-9">field</span><span class="hl-0">:</span><br/><span class="hl-0">  </span><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">text</span><br/><span class="hl-0">  </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">A Text Field</span>
</code></pre>

<a href="#values" id="values" style="color: inherit; text-decoration: none;">
  <h3>Values</h3>
</a>
<p>Dropdowns and radio inputs take a special property called <code>&quot;values&quot;</code> that is used to display the options available. This property can take several forms, depending on what you need.</p>
<p>If the raw, underlying values match what is displayed, use an array of strings:</p>
<pre><code class="language-yaml"><span class="hl-9">values</span><span class="hl-0">:</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 1</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 2</span><br/><span class="hl-0">  - </span><span class="hl-10">Option 3</span>
</code></pre>
<p>Otherwise, if you want the value to be different that what is displayed for the option, use an object. The key will be the label and the value is the raw value:</p>
<pre><code class="language-yaml"><span class="hl-9">values</span><span class="hl-0">:</span><br/><span class="hl-0">  </span><span class="hl-9">China</span><span class="hl-0">: </span><span class="hl-10">CN</span><br/><span class="hl-0">  </span><span class="hl-9">United States of America</span><span class="hl-0">: </span><span class="hl-10">US</span><br/><span class="hl-0">  </span><span class="hl-9">United Kingdom</span><span class="hl-0">: </span><span class="hl-10">UK</span>
</code></pre>
<p>Radios need one more special format that allows for a description below each radio element. This is an array of objects.</p>
<pre><code class="language-yaml"><span class="hl-9">values</span><span class="hl-0">:</span><br/><span class="hl-0">  - </span><span class="hl-9">value</span><span class="hl-0">: </span><span class="hl-10">opt1</span><br/><span class="hl-0">    </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Option 1</span><br/><span class="hl-0">    </span><span class="hl-9">description</span><span class="hl-0">: </span><span class="hl-10">This is option 1</span><br/><span class="hl-0">  - </span><span class="hl-9">value</span><span class="hl-0">: </span><span class="hl-10">opt2</span><br/><span class="hl-0">    </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Option 2</span><br/><span class="hl-0">    </span><span class="hl-9">description</span><span class="hl-0">: </span><span class="hl-10">This is option 2</span>
</code></pre>

<a href="#controlling-field-visibility" id="controlling-field-visibility" style="color: inherit; text-decoration: none;">
  <h3>Controlling Field Visibility</h3>
</a>
<blockquote>
<p>Note: This functionality is not directly provided by this package and is instead something the UI would need to interpret. This is provided as example of how form visibility could work; we have successfully implemented into Pagedip&#39;s tools using <a href="https://www.npmjs.com/package/mingo">mingo</a>.</p>
</blockquote>
<p>A field can be dynamically shown and hidden on the page by using other form values to control. The most common example would be showing a series of inputs when a checkbox is selected. Here is an example of this:</p>
<pre><code class="language-yaml"><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">section</span><br/><span class="hl-9">children</span><span class="hl-0">:</span><br/><span class="hl-0">  </span><span class="hl-9">enablecheck</span><span class="hl-0">:</span><br/><span class="hl-0">    </span><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">checkbox</span><br/><span class="hl-0">    </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Enable this thing?</span><br/><span class="hl-0">  </span><span class="hl-9">importantvalue</span><span class="hl-0">:</span><br/><span class="hl-0">    </span><span class="hl-9">type</span><span class="hl-0">: </span><span class="hl-10">text</span><br/><span class="hl-0">    </span><span class="hl-9">label</span><span class="hl-0">: </span><span class="hl-10">Only shown when enabled</span><br/><span class="hl-0">    </span><span class="hl-9">visible</span><span class="hl-0">:</span><br/><span class="hl-0">      </span><span class="hl-9">enablecheck</span><span class="hl-0">: </span><span class="hl-4">true</span>
</code></pre>
<p>This is all controlled through the <code>visible</code> property. This property is a MongoDB selector that is compared to the parent value. In this case, &quot;parent&quot; means the root section schema, however in the case of a deep schema, the selector is only compared to the direct parent and does not get access to all the data.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/Blueprint.html" class="tsd-kind-icon">Blueprint</a></li><li class="tsd-kind-class"><a href="classes/Field.html" class="tsd-kind-icon">Field</a></li><li class="tsd-kind-class"><a href="classes/Schema.html" class="tsd-kind-icon">Schema</a></li><li class="tsd-kind-interface"><a href="interfaces/BlueprintCreate.html" class="tsd-kind-icon">Blueprint<wbr/>Create</a></li><li class="tsd-kind-interface"><a href="interfaces/BlueprintRecord.html" class="tsd-kind-icon">Blueprint<wbr/>Record</a></li><li class="tsd-kind-interface"><a href="interfaces/FieldCreate.html" class="tsd-kind-icon">Field<wbr/>Create</a></li><li class="tsd-kind-interface"><a href="interfaces/FieldRecord.html" class="tsd-kind-icon">Field<wbr/>Record</a></li><li class="tsd-kind-interface"><a href="interfaces/Rule.html" class="tsd-kind-icon">Rule</a></li><li class="tsd-kind-interface"><a href="interfaces/SchemaCreateObject.html" class="tsd-kind-icon">Schema<wbr/>Create<wbr/>Object</a></li><li class="tsd-kind-interface"><a href="interfaces/SchemaRecord.html" class="tsd-kind-icon">Schema<wbr/>Record</a></li><li class="tsd-kind-type-alias"><a href="modules.html#FieldCreateList" class="tsd-kind-icon">Field<wbr/>Create<wbr/>List</a></li><li class="tsd-kind-type-alias"><a href="modules.html#FieldCreateProps" class="tsd-kind-icon">Field<wbr/>Create<wbr/>Props</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SchemaCreate" class="tsd-kind-icon">Schema<wbr/>Create</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SchemaCreateRules" class="tsd-kind-icon">Schema<wbr/>Create<wbr/>Rules</a></li><li class="tsd-kind-variable"><a href="modules.html#defaultRules" class="tsd-kind-icon">default<wbr/>Rules</a></li><li class="tsd-kind-variable"><a href="modules.html#defaultSchema" class="tsd-kind-icon">default<wbr/>Schema</a></li><li class="tsd-kind-variable"><a href="modules.html#rules" class="tsd-kind-icon">rules</a></li><li class="tsd-kind-function"><a href="modules.html#default" class="tsd-kind-icon">default</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>